#!/usr/bin/env python
# produces a list of chosen weekdays between two dates
from datetime import datetime
from datetime import date
from datetime import timedelta

# separator    = '&' # TeX
# separator = ' , '  # CSV
# endrow       = '\\\\'
separator = '|'  # markdown
endrow = ' '
quotestring = ""


def enquote(stg):
    return(quotestring + stg.replace(",", "") + quotestring)


# inputs
weekdays = ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun']
teachingdays = ['Mon', 'Wed', 'Fri']
teachingdays = ['Tue', 'Thu']
holidays = ['Sep, 06', 'Nov, 24', 'Nov, 25', 'Nov, 26', 'Nov, 27', 'Nov, 28']
first = 'Aug, 25'
last = 'Dec, 6'


# rest
today = date.today()
thisyear = int(today.strftime("%Y")[0:4])
first_date = datetime.strptime(first, '%b, %d')
first_date = first_date.replace(year=thisyear)
last_date = datetime.strptime(last, '%b, %d')
last_date = last_date.replace(year=thisyear)
oneday = timedelta(days=1)
current = first_date
num = 0
print(separator.join(["Number", "Date", "Weekday", "Topic"]))
print(separator.join(["---", "---", "---", "---"]))


while current <= last_date:
    wday = weekdays[date.weekday(current)]
    if wday in teachingdays:
        dform = current.strftime("%b, %d")
        if dform in holidays:
            snum = " - "
            note = "**no class**"
        else:
            num = num + 1
            snum = str(num)
            note = ""
        print(
            separator.join([snum, enquote(dform), wday, note, ]),
            endrow)
    current += oneday
