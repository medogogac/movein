#!/usr/bin/env python3
# splits a file by regex
import re

# Hardcoded arguments
filename = 'prbs.tex'
output_prefix='sl-mc-exam'
sep = r"(\\begin\{problem\})"
pattern = re.compile(sep)
print("File        : "+filename)
print("Separator   : "+sep)
print("Output files:")
thefile = open(filename, "r").read();
outlist = re.split(pattern,thefile)
num = len(outlist)
for i in range(1,(num+1)//2):
    out = outlist[2*i-1]+ outlist[2*i]
    outnum = format(i,'02d')
    outname = output_prefix+"-"+outnum+".tex"
    print("  "+outname)
    with open(outname,"w") as f:
        f.write(out)
    
